<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step03_document3.html</title>
    <style>
        p{
            color: blue;
        }
        .box{
            width: 70px;
            height: 70px;
            background-color: yellow;
            cursor: pointer;
            transition: 2s ease-out;
            margin-left : 280px;
            margin-top: 280px;
            
        }
        button{
            width: 100px;
            height: 100px;
        }
        .largebox{
            height: 1000px;
        }
    </style>
</head>
<body>
    <h1>인라인 css 테스트</h1>
    <p style="color:red; background-color: antiquewhite;">Lorem ipsum dolor sit amet consectetur adipisicing elit. Blanditiis eligendi magnam, beatae id cupiditate quia odio facilis commodi maxime maiores nemo nulla atque, voluptates et numquam odit aliquam aperiam saepe?</p>
    <button onclick="boxreset()">되돌리기</button> <p></p>
    <div id="high">최고기록</div>
    <div id="score">현재 점수 : 0</div>
    <div class="largebox">
        <div class="box" onclick="moveBox()" onmouseleave="boxreset()">눌러보세요</div>
    </div> 
    <script>
        let highcount = 0;
        let a = 280;
        let b = 280;
        let count = 0;
        let random ;
        moveBox=()=>{
            if (a>700){
                random = 1;
            }
            else if (a<=70){
                random = 2;
            }
            else if (b > 700){
                random = 3;
            }
            else if (b<=70){
                random = 4;
            }
            else{
                random = Math.ceil(Math.random()*4);
                // random 1:left 2:right 3:up 4:down
            }
            if (random == 2){
                a += 70;
                document.querySelector(".box").style.marginLeft=a+"px";
                // document.querySelector(".box").style.marginLeft+=70+"px" 이렇게도 되나...?
                // 안됨 70px70px 가 되어버려서 
                // 이렇게 할거면 marginleft의 값을 추출후 px를 떼버리고 (replace 사용) 사용해야함
            }
            else if (random == 1){
                a -=70;
                document.querySelector(".box").style.marginLeft=a+"px";
            }
            else if ( random == 3){
                b -= 70;
                document.querySelector(".box").style.marginTop=b+"px";
            }
            else if ( random == 4){
                b += 70;
                document.querySelector(".box").style.marginTop=b+"px";
            }
            console.log(random+" 1:left, 2:right. 3:up, 4:down");
            console.log(a+", "+b);
            count ++;
            document.querySelector(".box").innerText=count;
            // 난이도 조절 (transition 조절)
            if (count == 5){ 
                document.querySelector(".box").style.transition=1.5+"s";}
                else if (count == 10){
                    document.querySelector(".box").style.transition=1.25+"s";
                }
                else if (count == 15){
                    document.querySelector(".box").style.transition=1+"s";
                }
                else if (count == 20){
                    document.querySelector(".box").style.transition=0.7+"s";
                }
                else if (count == 30){
                    document.querySelector(".box").style.transition=0.5+"s";
                }
                else if (count == 40){
                    document.querySelector(".box").style.transition=0.1+"s";
                }
                //일단 40회넘어가면 못깸

                document.querySelector("#score").innerText = "현재 점수 : " + count
        }   
        
        boxreset=()=>{
            document.querySelector(".box").style.marginLeft="280px";
            document.querySelector(".box").style.marginTop="280px";
            document.querySelector(".box").style.transition=2+"s";
            // margin 280px 280px 하면 한번에되나? 모르니까 일단 패스
            document.querySelector(".box").innerText="실패!";
            
            if (count>highcount){
                highcount=count
            } // 최고기록 넘을시

            document.querySelector("#high").innerText="최고기록 : " + highcount;
            console.log("최고기록 : " + highcount);
            count = 0;
            a = 280;
            b = 280;
        }
    
    </script>
</body>
</html>